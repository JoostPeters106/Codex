<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Darts Tournament Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>SON Darts Championship</h1>

    <div class="index-layout">
        <section id="new-tournament" class="card">
            <h2>New Tournament</h2>
            <form action="{{ url_for('add_player') }}" method="post" class="add-player-form">
                <input type="text" class="styled-input" name="player_name" placeholder="Player name">
                <button type="submit" class="styled-button">Add</button>
            </form>

            <div class="player-container">
                {% if players %}
                <ul id="player-list">
                    {% for p in players %}
                    <li>
                        {{ p }}
                        <form action="{{ url_for('remove_player', index=loop.index0) }}" method="post" style="display:inline">
                            <button type="submit" class="styled-button">Remove</button>
                        </form>
                    </li>
                    {% endfor %}
                </ul>
                <form action="{{ url_for('start_tournament') }}" method="post">
                    <button type="submit" class="styled-button">Start Tournament</button>
                </form>
                {% else %}
                <p>No players added yet.</p>
                {% endif %}
            </div>
        </section>

        <section id="past-tournaments" class="card">
            <h2>Past Tournaments</h2>
            {% if tournaments %}
            <ul class="tournament-list">
                {% for t in tournaments %}
                <li>
                    <strong>{{ t.name }}</strong> - {{ t.created_at }}<br>
                    <span class="caption">Players in tournament: {{ t.players|length }}</span>
                    <div class="actions">
                        <a href="{{ url_for('tournament_view', t_id=t.id) }}" class="styled-button">Open</a>
                        <form action="{{ url_for('delete_tournament', t_id=t.id) }}" method="post" style="display:inline">
                            <button type="submit" class="styled-button">Delete</button>
                        </form>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No tournaments saved.</p>
            {% endif %}
        </section>
    </div>

    <section id="group-stage" style="display:none">
        <h2>Group Stage</h2>
        <div id="groups"></div>
        <div id="group-matches"></div>
        <button id="start-knockout" disabled>Start Knockout Phase</button>
    </section>

    <section id="knockout-stage" style="display:none">
        <h2>Knockout Stage</h2>
        <div id="knockout-bracket"></div>
    </section>

</body>
</html>
