<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournament</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Tournament {{ t_id }}</h1>
    <form id="reset-form" action="{{ url_for('reset') }}" method="post">
        <button id="reset-btn" type="button" class="styled-button">Go back to start</button>
    </form>

    <div id="confirm-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5);">
        <div style="background:#fff; padding:1em; border-radius:5px; width:200px; margin:20% auto; text-align:center;">
            <p>Are you sure?</p>
            <button id="confirm-yes" class="styled-button">Yes</button>
            <button id="confirm-no" class="styled-button">No</button>
        </div>
    </div>

    <section>
        <h2>Players</h2>
        <ul>
            {% for p in players %}
            <li>{{ p }}</li>
            {% endfor %}
        </ul>
    </section>

    <section>
        <h2>Group A</h2>
        <p>{{ ', '.join(group_a) }}</p>
        <h3>Matches</h3>
        <table>
            <tr><th>Match</th><th>Score</th></tr>
            {% for m in schedule_a %}
            <tr>
                <td>{{ m.p1 }} vs {{ m.p2 }}</td>
                <td>
                    <form action="{{ url_for('record_score', t_id=t_id, group='A', index=loop.index0) }}" method="post" style="display:inline">
                        <input type="number" name="score1" min="0" required style="width:3em;" value="{{ m.score1 if m.score1 is not none }}">
                        -
                        <input type="number" name="score2" min="0" required style="width:3em;" value="{{ m.score2 if m.score2 is not none }}">
                        <button type="submit" class="styled-button">Save</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
        <h3>Standings</h3>
        <table>
            <tr><th>Player</th><th>Points</th><th>GD</th></tr>
            {% for s in standings_a %}
            <tr><td>{{ s.name }}</td><td>{{ s.points }}</td><td>{{ s.gd }}</td></tr>
            {% endfor %}
        </table>
    </section>

    <script>
        const resetBtn = document.getElementById('reset-btn');
        const modal = document.getElementById('confirm-modal');
        const yesBtn = document.getElementById('confirm-yes');
        const noBtn = document.getElementById('confirm-no');

        resetBtn.addEventListener('click', () => {
            modal.style.display = 'block';
        });
        yesBtn.addEventListener('click', () => {
            document.getElementById('reset-form').submit();
        });
        noBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });
    </script>
</body>
</html>